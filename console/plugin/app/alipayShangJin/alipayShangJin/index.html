<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="wechat-enable-text-zoom-em" content="true">
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="color-scheme" content="light dark">
	<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0,viewport-fit=cover">
	<link rel="shortcut icon" type="image/x-icon" href="//res.wx.qq.com/a/wx_fed/assets/res/NTI4MWU5.ico" reportloaderror>
	<link rel="mask-icon" href="//res.wx.qq.com/a/wx_fed/assets/res/MjliNWVm.svg" color="#4C4C4C" reportloaderror>
	<link rel="apple-touch-icon-precomposed" href="//res.wx.qq.com/a/wx_fed/assets/res/OTE0YTAw.png" reportloaderror>
	<meta name="apple-mobile-web-app-capable" content="yes">
	<meta name="apple-mobile-web-app-status-bar-style" content="black">
	<meta name="format-detection" content="telephone=no">
	<meta name="referrer" content="origin-when-cross-origin">
	<meta name="referrer" content="strict-origin-when-cross-origin">
	<meta name="description" content="">
	<meta property="og:title" content="">
    <meta property="og:description" content="">
    <!--åˆ†äº«å¡ç‰‡å›¾æ ‡ï¼Œå¯ä»¥è‡ªå·±æ¢-->
    <meta property="og:image" content="https://img.pddpic.com/mms-material-img/2023-12-14/08d321d2-77ac-4cbf-ac16-8456891f1546.jpeg.a.jpeg">
	<style>
	    *{
	        padding: 0;
	        margin: 0;
	    }
	    
	    /*èƒŒæ™¯å›¾*/
	    body {
	        position: fixed;
	        top: 0;
	        width: 100%;
	        height: 100%;
	    }
	    
	    /* é®ç½©å±‚æ ·å¼ */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5); /* åŠé€æ˜é»‘è‰²èƒŒæ™¯ */
            z-index: 1;
        }

        /* æ¨¡æ€æ¡†æ ·å¼ */
        .alertModal {
            display: none;
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: white;
            padding: 30px;
            z-index: 2;
            border-radius: 10px;
            width: 60%;
        }
        
        /*æ¨¡æ€æ¡†æ ‡é¢˜*/
        .alertModal .h3-title{
            color: #ee4234;
            text-align: center;
            margin-bottom: 20px;
        }
        
        /*æ¨¡æ€æ¡†æ–‡å­—*/
        .alertModal p{
            font-size: 16px;
            line-height: 30px;
            text-align: center;
        }
	   
	</style>
</head>
<body id="myBody">
    
    <!-- æ¨¡æ€æ¡†é®ç½©å±‚ -->
    <div id="modalOverlay" class="modal-overlay"></div>

    <!-- æ¨¡æ€æ¡† -->
    <div id="myModal" class="alertModal">
        <h3 class="h3-title">çº¢åŒ…ç å¤åˆ¶æˆåŠŸ</h3>
        <p>1. æ‰“å¼€æ”¯ä»˜å®APP</p>
        <p>2. ç²˜è´´è‡³æœç´¢æ¡†</p>
        <p>3. ç‚¹å‡»ä¸‹æ–¹æœç´¢é¢†å–</p>
        <p> - - - </p>
        <p>æˆ–è€…å°è¯•ä¸€ä¸‹</p>
        <p> ğŸ‘‡ï¸ğŸ‘‡ï¸ğŸ‘‡ï¸ </p>
        <p>å³ä¸Šè§’[Â·Â·Â·]åœ¨æµè§ˆå™¨æ‰“å¼€å¯ç›´æ¥è·³åˆ°æ”¯ä»˜å®APPè‡ªåŠ¨é¢†å–</p>
    </div>
	
	<script type="text/javascript">
	
	    // åˆ›å»ºä¸€ä¸ªXHRå¯¹è±¡è·å–æ”¯ä»˜å®èµé‡‘çº¢åŒ…çš„é…ç½®ä¿¡æ¯
        var xhr = new XMLHttpRequest();
        xhr.open('GET', '../../console/plugin/app/alipayShangJin/server/alipayShangJin.json', true);
        xhr.onload = function () {
          if (xhr.status >= 200 && xhr.status < 300) {
              
            // è¯·æ±‚æˆåŠŸï¼Œå¤„ç†å“åº”æ•°æ®
            var alipayShangJinData = JSON.parse(xhr.responseText);
            
            // æ ‡é¢˜
            document.title = alipayShangJinData.alipayShangJinSPA_title;
            
            // æ‘˜è¦
            document.querySelector('meta[name="description"]').setAttribute('content', alipayShangJinData.alipayShangJinSPA_desc);
            
            // è®¾ç½®åˆ†äº«å¡ç‰‡çš„æ ‡é¢˜å’Œæ‘˜è¦
            var ogTitleMeta = document.querySelector('meta[property="og:title"]');
            var ogDescMeta = document.querySelector('meta[property="og:description"]');
            ogTitleMeta.setAttribute('content', alipayShangJinData.alipayShangJinSPA_title);
            ogDescMeta.setAttribute('content', alipayShangJinData.alipayShangJinSPA_desc);
            
            // æ”¯ä»˜å®å•†å®¶ID
    		var shareId = alipayShangJinData.alipayShangJinSPA_uid;
    
    		// çº¢åŒ…ç Token
    		var toKen = alipayShangJinData.alipayShangJinSPA_token;
    		
    		// çº¢åŒ…ç æœç´¢ç 
    		var hongbaoNum = alipayShangJinData.alipayShangJinSPA_hbm;
    		
            // èƒŒæ™¯å›¾
            var bgIMG = alipayShangJinData.alipayShangJinSPA_bgImg;
            
            // è®¾å¤‡åˆ¤æ–­
            detectMobileOperatingSystem(shareId, toKen, hongbaoNum, bgIMG);
            
            // ç¦æ­¢é¡µé¢ä¸Šä¸‹æ»‘åŠ¨
            disableScroll();
            
            
          } else {
              
            // è¯·æ±‚å¤±è´¥ï¼Œå¤„ç†é”™è¯¯
            console.error('è¯·æ±‚å¤±è´¥ï¼ŒçŠ¶æ€ç :', xhr.status);
          }
        };
        xhr.onerror = function () {
          console.error('è¯·æ±‚å‘ç”Ÿé”™è¯¯');
        };
        xhr.send();
		
		// è·³è½¬
		function jumpToAlipayApp(shareId, toKen) {

			window.location.href = 'https://ulink.alipay.com/?scheme=alipays%3A%2F%2Fplatformapi%2Fstartapp%3FsaId%3D10000007%26clientVersion%3D3.7.0.0718%26qrcode%3Dhttps%253A%252F%252Frender.alipay.com%252Fp%252Fc%252Falipay-red-qrcode%252Fshared.html%253Fchannel%253Dsearch_pwd%2526shareId%253D' + shareId + '%2526token%253D' + toKen + '%2526campStr%253DkPPFvOxaCL3f85TiKss2wsBZgIjulHjG%2526sign%253DqsiVOoa7TuphryWxyBdONXsMTnE3jiIBvWeUs3yV1sw%253D%2526chInfo%253DDingtalk%2526c_stype%253Dsearch_pwd';
		}

		// è®¾å¤‡åˆ¤æ–­
		function detectMobileOperatingSystem(shareId, toKen, hongbaoNum, bgIMG) {

		    const userAgent = navigator.userAgent;
		    if (/Android/i.test(userAgent)) {

		    	// Android
                var body = document.querySelector('body');
                body.style.background = "url('"+ bgIMG +"') no-repeat";
                body.style.backgroundSize = "100%";
                
                // å¦‚æœä¸æ˜¯åœ¨å¾®ä¿¡å†…æ‰“å¼€
                if (navigator.userAgent.indexOf("MicroMessenger") !== -1) {
                    
                    // å¾®ä¿¡æµè§ˆå™¨
                    // è·å–<body>æ ‡ç­¾
                    var body = document.getElementById("myBody");
                    
                    // ç›‘å¬bodyçš„ç‚¹å‡»
                    body.addEventListener("click", function() {
                        
                        // å¤åˆ¶çº¢åŒ…ç 
                        copyToClipboard(hongbaoNum);
                    });
                }else {
                    
                    // éå¾®ä¿¡æµè§ˆå™¨
                    // å°è¯•è·³è½¬
                    jumpToAlipayApp(shareId, toKen);
                }
		    } else if (/iPhone|iPad|iPod/i.test(userAgent)) {

		    	// iOS
                var body = document.querySelector('body');
                body.style.background = "url('"+ bgIMG +"') no-repeat";
                body.style.backgroundSize = "100%";
                
		        // è·å–<body>æ ‡ç­¾
                var body = document.getElementById("myBody");
                
                // è‡ªåŠ¨è·³
                jumpToAlipayApp(shareId, toKen);
            
                // ç›‘å¬bodyçš„ç‚¹å‡»
                body.addEventListener("click", function() {
                    
                    // è·³è½¬åˆ°æ”¯ä»˜å®APP
                    jumpToAlipayApp(shareId, toKen);
                });
		    } else {

		    	// æœªçŸ¥æ“ä½œç³»ç»Ÿ
                var elementToModify = document.querySelector('body');
                elementToModify.style.background = "url('"+bgIMG+"') no-repeat";
                elementToModify.style.backgroundSize = "100%";
                
                // å¦‚æœä¸æ˜¯åœ¨å¾®ä¿¡å†…æ‰“å¼€
                if (navigator.userAgent.indexOf("MicroMessenger") !== -1) {
                    
                    // å¾®ä¿¡æµè§ˆå™¨
                    // è·å–<body>æ ‡ç­¾
                    var body = document.getElementById("myBody");
                    
                    // ç›‘å¬bodyçš„ç‚¹å‡»
                    body.addEventListener("click", function() {
                        
                        // å¤åˆ¶çº¢åŒ…ç 
                        copyToClipboard(hongbaoNum);
                    });
                }else {
                    
                    // éå¾®ä¿¡æµè§ˆå™¨
                    // å°è¯•è·³è½¬
                    jumpToAlipayApp(shareId, toKen);
                }
		    }
		}
		
        // ç¦æ­¢é¡µé¢ä¸Šä¸‹æ»‘åŠ¨
		function disableScroll() {
		    
            document.addEventListener("touchmove", function(e) {
                e.preventDefault();
            }, { passive: false });
        }
        
        // æ‰“å¼€æ¨¡æ€æ¡†
        function openModal() {
            document.getElementById("modalOverlay").style.display = "block";
            document.getElementById("myModal").style.display = "block";
        }
    
        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            document.getElementById("modalOverlay").style.display = "none";
            document.getElementById("myModal").style.display = "none";
        }
        
        // å¤åˆ¶çº¢åŒ…ç 
        function copyToClipboard(textToCopy) {
            
            // åˆ›å»ºä¸€ä¸ªä¸´æ—¶æ–‡æœ¬æ¡†å…ƒç´ 
            const tempInput = document.createElement("input");
            tempInput.value = textToCopy;
            document.body.appendChild(tempInput);
            
            // é€‰æ‹©æ–‡æœ¬æ¡†çš„å†…å®¹
            tempInput.select();
            
            // å°è¯•å¤åˆ¶æ–‡æœ¬åˆ°å‰ªè´´æ¿
            document.execCommand("copy");
            
            // ç§»é™¤ä¸´æ—¶æ–‡æœ¬æ¡†å…ƒç´ 
            document.body.removeChild(tempInput);
            
            // å¤åˆ¶å®Œæˆï¼Œæ‰“å¼€å¼¹çª—
            openModal();
        }
	</script>
</body>
</html>